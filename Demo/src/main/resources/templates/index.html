<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Test </title>
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
</head>
<body onload="init();">
    <h3>Counter</h3>
    Current counter:
    <span id="current_value"></span>
    <div>
        <input type="button" onclick="increment();" value="Increment">
    </div>
</body>
<script src="http://cdn.sockjs.org/sockjs-0.3.4.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vertx/3.4.2/vertx-eventbus.min.js"></script>
<script type="text/javascript">
    // function callback (err, msg) {
    //     console.log('Received message from client: ' + msg.body);
    //     var data = document.getElementById('data');
    //     data.innerText = data.innerText + msg.body + '\n';
    // }

    // function init() {
    //     window.eb = new EventBus('/eventbus/');
    //     window.eb.onopen = function () {
    //         window.eb.registerHandler('to_client', callback);
    //         window.eb.send('to_send', 'send to client');
    //         window.eb.send('to_publish', 'publish to client');
    //         window.eb.send('to_reply', 'reply to client', null, callback);
    //     };
    // }

                function init() {
            registerHandler();
            }

            let eventBus;

            function registerHandler() {
            eventBus = new EventBus('http://localhost:8080/eventbus');
            eventBus.onopen = function () {
                eventBus.registerHandler('out', function (error, message) {
                const counter = message.body;
                document.getElementById('current_value').innerHTML = counter;
                });
            }
            }

            function increment() {
            eventBus.send('in')
        }
</script>
</html>



<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Vert.x with SockJS</title>
    <script src="//cdn.jsdelivr.net/sockjs/0.3.4/sockjs.min.js"></script>
    <script src="js/vertx-eventbus.js"></script>
    <script src="js/app.js"></script>
</head>

</html>
